$(document).ready(function(){$("html,body").animate({scrollTop:0},0),HideOtpButton(),jQuery("#slider-revolution").revolution({sliderType:"standard",sliderLayout:"fullwidth",delay:5e3,navigation:{arrows:{enable:!0},bullets:{enable:!1,style:"hermes"}},parallax:{type:"mouse",origo:"slidercenter",speed:2e3,levels:[2,3,4,5,6,7,12,16,10,50]},spinner:"off",gridwidth:1140,gridheight:700,disableProgressBar:"on"}),$("#example").DataTable({data:dataSet,columns:[{title:"Day"},{title:"Name"},{title:"Rank"}]})});const loadingAndUnloadingButton=(e,t,a)=>{$(`#${e}`).prop("disabled",t),$(`#${e}`).html(t?'<i class="fa fa-spinner fa-spin"></i>':a)},HideOtpButton=()=>{window.location.href.includes("&utm_campaign=referral")||(verified=!0,$("#otp-button").css("display","none")),$("#form-reg-otp").css("display","none")},mySubmit=async e=>{const t=window.location.href.includes("&utm_campaign=referral"),a=getFormsValue(e),r=checkForTheError(a,t),o=$(".iti__selected-flag").attr("title").split(" ").pop()+a.phone_number;r||(t?validateOtp(a).then(e=>{makeRegistration(a)}).catch(e=>{showAndHideValueError("otp",e.message.reason),loadingAndUnloadingButton("form-submit-btn",!1,"Register")}):(loadingAndUnloadingButton("form-submit-btn",!0,""),validateEmailId(a.email_id,o).then(e=>{1!=e.message.email_status&&3!=e.message.email_status&&4!=e.message.email_status||!e.message.phone_number_status||makeRegistration(a,o),2!=e.message.email_status&&5!=e.message.email_status&&6!=e.message.email_status&&7!=e.message.email_status&&8!=e.message.email_status&&9!=e.message.email_status||(showAndHideValueError("email_id","The email address is invalid"),errorRedBorder("#form-reg-email_id"),loadingAndUnloadingButton("form-submit-btn",!1,"Register")),e.message.phone_number_status||(showAndHideValueError("phone_number","The phone number is invalid"),errorRedBorder("#form-reg-phone_number"),loadingAndUnloadingButton("form-submit-btn",!1,"Register"))}).catch(e=>{showAndHideValueError("email_id",e.message.reason),loadingAndUnloadingButton("form-submit-btn",!1,"Register")})))},checkForTheError=(e,t)=>{let a=!1;const{consent_2:r,...o}=e;return Object.keys(o).map(r=>{if("otp"===r&&!t||!r)return null;showAndHideValueError(r,""),$(`#form-reg-${r}`).css("border","none"),o[r]||(showAndHideValueError(r,"consent_1"===r?"Please give consent":`Please enter ${capitalizeFirstLetter(r.replace("_"," "))}`),errorRedBorder(`#form-reg-${r}`),a=!0),"email_id"===r?pattern.test(e[r])||(showAndHideValueError(r,"Please enter valid Email"),errorRedBorder(`#form-reg-${r}`),a=!0):("phone_number"!==r||/^\d{10}$/.test(e[r])||"India"!=$(".iti__selected-flag").attr("title").split(" ")[0])&&("phone_number"!==r||/^\d{7,13}$/.test(e[r]))||(showAndHideValueError(r,"Please enter valid Phone Number"),errorRedBorder(`#form-reg-${r}`),a=!0)}),a},showAndHideValueError=(e,t)=>{$(`#${e}_error`).html(t).css("color","red")},combineNames=e=>(e.name=e.first_name+"  "+e.last_name,delete e.first_name,delete e.last_name,e),validateEmailId=async(e,t)=>new Promise((a,r)=>{$.get(`https://y1m1c7wq22.execute-api.ap-south-1.amazonaws.com/prod/email-validate?phone_number=${t}`,{ticket_type:"Community Ticket",email_id:e,event_id:"konfhub-eventf213c2f0"},e=>{200===e.status_code?a(e):(r(e),errorRedBorder("#form-reg-email_id"))})});let responseBooking_id;const makeRegistration=(e,t)=>{console.log(e);var a=new XMLHttpRequest;a.open("POST","https://khd9ooi5pg.execute-api.ap-south-1.amazonaws.com/prod/event/akd",!0),a.send(JSON.stringify(eventDetailsToSendToBackEnd(e))),console.log(eventDetailsToSendToBackEnd(e)),0===a.status?(a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE){const e=JSON.parse(a.response);responseBooking_id=e.booking_id}},loadingAndUnloadingButton("form-submit-btn",!1,"Register"),$("#form-reg-email_id").prop("disabled",!1),showModalAfterSuccess(e.email_id,t,e.phone_number)):(loadingAndUnloadingButton("form-submit-btn",!1,"Register"),$("#form-reg-email_id").prop("disabled",!1))},whatsappSubmit=async(e,t)=>{const a=document.getElementById("form-reg-name-first").value+" "+document.getElementById("form-reg-name-last").value,r=$(".iti__selected-flag").attr("title").split(" ").pop()+e,o=document.getElementById("form-reg-phone_number").value,n=checkWhatsappNumber(e);t?n||validateWhatsappNumber(r).then(e=>{e.message.phone_number_status&&(makeWhatsappRegistration(r,t,a,o),$("#myModalThankyou").modal("hide")),e.message.phone_number_status||showAndHideValueError("whatsapp","Please Enter a Valid Mobile Number")}).catch(e=>{showAndHideValueError("whatsapp",e.message.reason),loadingAndUnloadingButton("form-submit-btn",!1,"Register")}):$("#myModalThankyou").modal("hide")},checkWhatsappNumber=e=>{let t=!1;return/^\d{10}$/.test(e)||"India"!=iti.s.name.split(" ")[0]?/^\d{7,13}$/.test(e)||(showAndHideValueError("whatsapp","Please enter valid Phone Number"),errorRedBorder("#form-reg-whatsapp_phone_number"),t=!0):(showAndHideValueError("whatsapp","Please enter valid Phone Number"),errorRedBorder("form-reg-whatsapp_phone_number"),t=!0),t},validateWhatsappNumber=async e=>new Promise((t,a)=>{$.get(`https://y1m1c7wq22.execute-api.ap-south-1.amazonaws.com/prod/email-validate?phone_number=${e}`,e=>{200===e.status_code?t(e):(a(e),errorRedBorder("#form-reg-email_id"))})}),makeWhatsappRegistration=(e,t,a,r)=>{$.ajax({type:"POST",url:"https://y1m1c7wq22.execute-api.ap-south-1.amazonaws.com/prod/event/konfhub-eventf213c2f0/whatsapp-notification",contentType:"application/json",dataType:"json",data:JSON.stringify({booking_id:responseBooking_id,whatsapp_consent:t,whatsapp_number:e,template_name:"online_free_registation2",template_data:[{data:a},{data:"Azure Kubernetes Day"},{data:"31th January, 2021"},{data:responseBooking_id},{data:"https://akd.konfhub.com/"},{data:"reachus@konfhub.com"},{data:"+919566075227"},{data:"1"}]}),success:e=>{document.getElementById("form-reg").reset()},error:e=>{}})},showModalAfterSuccess=(e,t,a)=>{$("#regModalLabel-error").hide(),$("#regModalButton-error").hide(),$("#modal-error-body").hide(),$("#form-msg-mail").html(e),$("#myModalThankyou").modal(),iti.setNumber(t),$("#form-reg-whatsapp_phone_number").val(a)};var checker=document.getElementById("box-2"),sendbtn=document.getElementById("form-submit-btn");checker.onchange=function(){sendbtn.disabled=!this.checked};const getFormsValue=e=>{var t;const a={};for(t=0;t<e.length;t++)e.elements[t].name&&(a[e.elements[t].name]=e.elements[t].value.trim(),"checkbox"===e.elements[t].type&&(a[e.elements[t].name]=e.elements[t].checked));return a.country=$(".iti__selected-flag").attr("title").split(" ")[0],a},myOtp=()=>{const e=$("#form-reg-email_id").prop("value").trim();if(loadingAndUnloadingButton("otp-button",!0,""),""===e&&!pattern.test(e))return showAndHideValueError("email_id","Please enter valid Email id"),loadingAndUnloadingButton("otp-button",!1,"SEND OTP"),null;validateEmailId(e).then(t=>{sendOtp(e)}).catch(e=>{showAndHideValueError("email_id",e.message.reason),loadingAndUnloadingButton("otp-button",!1,"SEND OTP")})},sendOtp=e=>{$.ajax({type:"GET",url:"https://y1m1c7wq22.execute-api.ap-south-1.amazonaws.com/prod/event/konfhub-eventf213c2f0/referral/code",data:{email_id:e,"event-id":"konfhub-eventf213c2f0",event_name:"Azure Kubernetes Day"},success:e=>{$("#form-reg-email_id").prop("disabled",!0),$("#form-reg-otp").show(),showAndHideValueError("email_id","OTP sent")},error:e=>{}})},validateOtp=e=>new Promise((t,a)=>{if(4!==e.otp.length&&""===e.otp)return showAndHideValueError("otp","Please Enter valid OTP"),null;$.get("https://y1m1c7wq22.execute-api.ap-south-1.amazonaws.com/prod/event/konfhub-eventf213c2f0/referral/validate_code",{email_id:e.email_id,"event-id":"konfhub-eventf213c2f0",otp:e.otp},e=>{e.message.otp_verified?($("#form-reg-otp").css("display","none"),t(e)):(showAndHideValueError("otp","Email is not Verified"),errorRedBorder("#form-reg-otp"),a(e))})}),eventDetailsToSendToBackEnd=e=>({user_details:[{email_status:localStorage.getItem("status_codes_email"),name:capitalizeFirstLetter(e.first_name),email_id:e.email_id,organisation:e.organisation,phone_number:e.phone_number,country:e.country,designation:e.designation,conference_and_workshop:e.conference_and_workshop,form_details:{last_name:capitalizeFirstLetter(e.last_name),'<p><span_style="background-color:_transparent;_color:_rgb(0,_0,_0);">yes,_i_give_consent_to_konfhub_technologies_llp_to_contact_me_on_any_event_updates,_news_or_offers_by_email,_sms_or_phone.</span></p>':e.consent_1,'<p><span_style="background-color:_transparent;_color:_rgb(0,_0,_0);">i_would_like_information,_tips,_and_offers_about_microsoft_products_and_services._</span><a_href="https://go.microsoft.com/fwlink/?linkid=521839"_rel="noopener_noreferrer"_target="_blank"_style="background-color:_transparent;_color:_rgb(17,_85,_204);">privacy_statement</a><span_style="background-color:_transparent;_color:_rgb(0,_0,_0);">.</span></p>':e.consent_2},ticket_details:[{name:"Community Ticket",id:"dt1 ",date:"2020-06-03",price:0}],ticket_name:"Community Ticket",ticket_price:0,ticket_date:"2020-06-03"}],utm:regTrack(window.location.href.split("?")[1])}),regTrack=e=>{try{if(""===e)return null;e=e.replace("?","").split("&");const t={};return e.map(e=>{t[e.split("=")[0]]=e.split("=")[1].slice(0,e.split("=")[1].indexOf("#")>-1?e.split("=")[1].indexOf("#"):e.split("=")[1].length)}),t}catch(e){return null}},capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1),errorRedBorder=e=>{$(e).css("border","1px solid red")},pattern=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,pointing=e=>{window.location.href.split("#")[window.location.href.split("#").length-1]!==e&&(window.location.href=window.location.href.split("#")[0]+"#"+e)};var dataSet=[["1","Madalam ","1"],["1","Dhruvam Pandey","2"],["1","Gaurav Rohra","3"],["2","Aadesh Kataria","1"],["2","Haardik Dharma","2"],["2","Gaurav","3"],["3","Rishikesh","1"],["3","Iismail Faris","2"],["3","VinothKumar Purushothaman","3"],["4","Ajay Kumar","1"],["4","Yagna Ameta","2"],["4","Rathanakumar","3"],["5","Bhavesh","1"],["5","Janani S","2"],["5","T Navneeth","3"],["6","Jagadesh Devarajan","1"],["6","Mohamed Abdelrazek","2"],["6","Ashish Kumar","3"]];